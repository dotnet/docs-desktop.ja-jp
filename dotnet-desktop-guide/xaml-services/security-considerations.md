---
title: XAML セキュリティの考慮事項
ms.date: 03/30/2017
helpviewer_keywords:
- security [XAML Services], .NET XAML services
- XAML security [XAML Services]
ms.assetid: 544296d4-f38e-4498-af49-c9f4dad28964
ms.openlocfilehash: 1864910b339c74e3033fb4d6d8baebffada1a4f8
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/09/2020
ms.locfileid: "96985863"
---
# <a name="xaml-security-considerations"></a>XAML のセキュリティに関する考慮事項

この記事では、XAML および .NET XAML サービス API を使用する場合のアプリケーションのセキュリティに関するベストプラクティスについて説明します。

## <a name="untrusted-xaml-in-applications"></a>アプリケーション内の信頼されていない XAML

最も一般的な意味では、信頼されていない XAML とは、アプリケーションによって明示的にインクルードまたは出力されなかった XAML ソースのことです。

信頼された署名付きアセンブリ内にコンパイルされる、または型のリソースとして格納される XAML `resx` は、本質的に信頼できません。 XAML は、アセンブリ全体を信頼するのと同じくらい信頼できます。 ほとんどの場合、必要なのは、ストリームまたは他の i/o から読み込む XAML ソースである、ルース XAML の信頼の側面だけです。 ルース XAML は、デプロイおよびパッケージ化インフラストラクチャを備えた、アプリケーションモデルの特定のコンポーネントまたは機能ではありません。 ただし、アセンブリは、厳密でない XAML の読み込みを伴う動作を実装する場合があります。

信頼されていない XAML では、通常、信頼できないコードの場合と同じように扱う必要があります。 サンドボックスまたはその他のメタファを使用して、信頼されていない XAML が信頼できるコードにアクセスするのを防ぎます。

XAML 機能の性質上、XAML はオブジェクトを構築し、そのプロパティを設定する権限を持ちます。 これらの機能には、マークアップ拡張機能、ブロックなどを使用して、型コンバーターへのアクセス、アプリケーションドメインでのアセンブリへのマッピングとアクセスが含ま `x:Code` れます。

XAML は、言語レベルの機能に加えて、多くのテクノロジで UI 定義に使用されます。 信頼されていない XAML を読み込むと、悪意のあるスプーフィング UI が読み込まれる可能性があります。

## <a name="sharing-context-between-readers-and-writers"></a>リーダーとライターの間でコンテキストを共有する

Xaml リーダーおよび XAML ライターの .NET XAML サービスアーキテクチャでは、多くの場合、xaml リーダーを XAML ライターまたは共有 XAML スキーマコンテキストに共有する必要があります。 XAML ノードループロジックを記述する場合、またはカスタム保存パスを指定する場合は、オブジェクトまたはコンテキストの共有が必要になることがあります。 XAML リーダーインスタンス、既定以外の XAML スキーマコンテキスト、または信頼されていないコードと信頼されていないコードの間の XAML リーダー/ライタークラスの設定を共有しないでください。

CLR ベースの型をバッキングする XAML オブジェクトの書き込みに関連するほとんどのシナリオと操作で、既定の XAML スキーマコンテキストを使用できます。 既定の XAML スキーマコンテキストには、完全な信頼を損なう可能性のある設定が明示的に含まれていません。 そのため、信頼された XAML リーダー/ライターコンポーネント間でコンテキストを安全に共有できます。 ただし、これを行う場合は、このようなリーダーとライターを別のスコープに保持しておくことをお勧めし <xref:System.AppDomain> ます。そのうちの1つは、部分的に信頼されているかどうかを明確にしたものです。

## <a name="xaml-namespaces-and-assembly-trust"></a>XAML 名前空間とアセンブリ信頼

XAML がアセンブリに対するカスタム XAML 名前空間のマッピングを解釈する方法についての基本的な非修飾構文と定義では、アプリケーションドメインに読み込まれた信頼されたアセンブリと信頼されていないアセンブリを区別しません。 したがって、信頼されていないアセンブリが、信頼されたアセンブリの XAML 名前空間マッピングになりすまし、XAML ソースの宣言されたオブジェクトとプロパティ情報をキャプチャすることは、技術的には可能です。 この状況を回避するためのセキュリティ要件がある場合は、次のいずれかの方法を使用して、目的の XAML 名前空間マッピングを作成する必要があります。

- アプリケーションの XAML によって作成された任意の XAML 名前空間のマッピングで、厳密な名前を持つ完全修飾アセンブリ名を使用します。

- <xref:System.Xaml.XamlSchemaContext>Xaml リーダーと xaml オブジェクトライターに固有のを構築することによって、アセンブリマッピングを参照アセンブリの固定セットに制限します。 以下を参照してください。<xref:System.Xaml.XamlSchemaContext.%23ctor%28System.Collections.Generic.IEnumerable%7BSystem.Reflection.Assembly%7D%29>

## <a name="xaml-type-mapping-and-type-system-access"></a>XAML 型のマッピングと型システムアクセス

XAML は独自の型システムをサポートしています。これは、CLR が基本的な CLR 型システムを実装する方法をさまざまな方法でピアリングします。 ただし、型情報に基づいて型についての信頼の決定を行う型認識の特定の側面については、CLR バッキング型の型情報に従う必要があります。 これは、XAML 型システムの特定のレポート機能の一部が仮想メソッドとして開いたままになっているため、元の .NET XAML サービス実装の制御が完全ではないためです。 これらの拡張ポイントは、xaml 型システムが拡張可能であり、XAML 自体の機能拡張と、既定の CLR によってサポートされる実装および既定の XAML スキーマコンテキストと比較して、使用可能な代替型マッピング戦略と一致するために存在します。 詳細については、「」および「」のいくつかのプロパティに関する特定のメモを参照してください <xref:System.Xaml.XamlType> <xref:System.Xaml.XamlMember> 。

## <a name="see-also"></a>関連項目

- <xref:System.Xaml.Permissions.XamlAccessLevel>
