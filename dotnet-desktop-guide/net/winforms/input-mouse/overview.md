---
title: マウス入力の概要
description: .NET 用 Windows フォームでのマウス入力のしくみについて説明します。 マウス イベントは、フォームとコントロールによって発生し、マウスの位置とボタンの状態を表します。
ms.date: 10/26/2020
ms.topic: overview
helpviewer_keywords:
- Windows Forms, mouse input
- mouse [Windows Forms], input
ms.openlocfilehash: 3e85305796d724d9acdbcd2e7cb86e748c30b783
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/09/2020
ms.locfileid: "96942234"
---
# <a name="overview-of-using-the-mouse-windows-forms-net"></a><span data-ttu-id="4b1b8-104">マウスの使用の概要 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="4b1b8-104">Overview of using the mouse (Windows Forms .NET)</span></span>

<span data-ttu-id="4b1b8-105">マウス入力の受信と処理は、すべての Windows アプリケーションの重要な部分です。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-105">Receiving and handling mouse input is an important part of every Windows application.</span></span> <span data-ttu-id="4b1b8-106">マウス イベントを処理してアプリケーションでアクションを実行したり、マウスの位置情報を使用してヒット テストやその他のアクションを実行したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-106">You can handle mouse events to carry out an action in your application, or use mouse location information to perform hit testing or other actions.</span></span> <span data-ttu-id="4b1b8-107">また、アプリケーションのコントロールでマウス入力を処理する方法も変更できます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-107">Also, you can change the way the controls in your application handle mouse input.</span></span> <span data-ttu-id="4b1b8-108">この記事では、これらのマウス イベントの詳細と、マウスのシステム設定を取得して変更する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-108">This article describes these mouse events in detail, and how to obtain and change system settings for the mouse.</span></span>

[!INCLUDE [desktop guide under construction](../../includes/desktop-guide-preview-note.md)]

<span data-ttu-id="4b1b8-109">Windows フォームでは、ユーザー入力は、[Windows メッセージ](/windows/win32/winmsg/about-messages-and-message-queues)の形式でアプリケーションに送信されます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-109">In Windows Forms, user input is sent to applications in the form of [Windows messages](/windows/win32/winmsg/about-messages-and-message-queues).</span></span> <span data-ttu-id="4b1b8-110">一連のオーバーライド可能なメソッドにより、これらのメッセージは、アプリケーション、フォーム、コントロールのレベルで処理されます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-110">A series of overridable methods process these messages at the application, form, and control level.</span></span> <span data-ttu-id="4b1b8-111">これらのメソッドにより、マウス メッセージが受信されると、マウス入力に関する情報を取得するために処理できるイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-111">When these methods receive mouse messages, they raise events that can be handled to get information about the mouse input.</span></span> <span data-ttu-id="4b1b8-112">多くの場合、Windows フォーム アプリケーションは、これらのイベントに対処するだけで、すべてのユーザー入力を処理できます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-112">In many cases, Windows Forms applications can process all user input simply by handling these events.</span></span> <span data-ttu-id="4b1b8-113">それ以外の場合は、アプリケーション、フォーム、またはコントロールが受信する前に、メッセージを処理するメソッドの 1 つをオーバーライドして、特定のメッセージを受け取ることができます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-113">In other cases, an application may override one of the methods that process messages to intercept a particular message before it's received by the application, form, or control.</span></span>

## <a name="mouse-events"></a><span data-ttu-id="4b1b8-114">マウス イベント</span><span class="sxs-lookup"><span data-stu-id="4b1b8-114">Mouse Events</span></span>

<span data-ttu-id="4b1b8-115">すべての Windows フォーム コントロールは、マウスおよびキーボード入力に関連する一連のイベントを継承します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-115">All Windows Forms controls inherit a set of events related to mouse and keyboard input.</span></span> <span data-ttu-id="4b1b8-116">たとえば、コントロールは <xref:System.Windows.Forms.Control.MouseClick> イベントを処理して、マウス クリックの位置を判断できます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-116">For example, a control can handle the <xref:System.Windows.Forms.Control.MouseClick> event to determine the location of a mouse click.</span></span> <span data-ttu-id="4b1b8-117">マウス イベントの詳細については、「[マウス イベントの使用](events.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-117">For more information on the mouse events, see [Using mouse events](events.md).</span></span>

## <a name="mouse-location-and-hit-testing"></a><span data-ttu-id="4b1b8-118">マウスの位置とヒットテスト</span><span class="sxs-lookup"><span data-stu-id="4b1b8-118">Mouse location and hit-testing</span></span>

<span data-ttu-id="4b1b8-119">ユーザーがマウスを動かすと、オペレーティング システムによってマウス ポインターが移動します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-119">When the user moves the mouse, the operating system moves the mouse pointer.</span></span> <span data-ttu-id="4b1b8-120">マウス ポインターには、ホット スポットと呼ばれる 1 つのピクセルが含まれています。これをオペレーティング システムがポインターの位置として追跡し、認識します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-120">The mouse pointer contains a single pixel, called the hot spot, which the operating system tracks and recognizes as the position of the pointer.</span></span> <span data-ttu-id="4b1b8-121">ユーザーがマウスを動かすか、マウス ボタンを押すと、<xref:System.Windows.Forms.Cursor.HotSpot%2A> を含む <xref:System.Windows.Forms.Control> によって適切なマウス イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-121">When the user moves the mouse or presses a mouse button, the <xref:System.Windows.Forms.Control> that contains the <xref:System.Windows.Forms.Cursor.HotSpot%2A> raises the appropriate mouse event.</span></span>

<span data-ttu-id="4b1b8-122">マウス イベントを処理するか、または <xref:System.Windows.Forms.Cursor> クラスの <xref:System.Windows.Forms.Cursor.Position%2A> プロパティを使用すると、<xref:System.Windows.Forms.MouseEventArgs> の <xref:System.Windows.Forms.MouseEventArgs.Location%2A> プロパティで、現在のマウス位置を取得できます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-122">You can obtain the current mouse position with the <xref:System.Windows.Forms.MouseEventArgs.Location%2A> property of the <xref:System.Windows.Forms.MouseEventArgs> when handling a mouse event or by using the <xref:System.Windows.Forms.Cursor.Position%2A> property of the <xref:System.Windows.Forms.Cursor> class.</span></span> <span data-ttu-id="4b1b8-123">マウスの位置情報を使用してヒットテストを実行し、マウスの位置に基づいてアクションを実行できます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-123">You can then use mouse location information to carry out hit-testing, and then perform an action based on the location of the mouse.</span></span> <span data-ttu-id="4b1b8-124">ヒットテスト機能は、<xref:System.Windows.Forms.ListView>、<xref:System.Windows.Forms.TreeView>、<xref:System.Windows.Forms.MonthCalendar>、<xref:System.Windows.Forms.DataGridView> コントロールなどの Windows フォームのいくつかのコントロールに組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-124">Hit-testing capability is built in to several controls in Windows Forms such as the <xref:System.Windows.Forms.ListView>, <xref:System.Windows.Forms.TreeView>, <xref:System.Windows.Forms.MonthCalendar> and <xref:System.Windows.Forms.DataGridView> controls.</span></span>

<span data-ttu-id="4b1b8-125">ヒットテストは、<xref:System.Windows.Forms.Control.MouseHover> などの適切なマウスイベントと共に使用され、アプリケーションが特定のアクションを実行する必要があるかどうかを判断するのに非常に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-125">Used with the appropriate mouse event, <xref:System.Windows.Forms.Control.MouseHover> for example, hit-testing is very useful for determining when your application should do a specific action.</span></span>

## <a name="changing-mouse-input-settings"></a><span data-ttu-id="4b1b8-126">マウスの入力設定の変更</span><span class="sxs-lookup"><span data-stu-id="4b1b8-126">Changing mouse input settings</span></span>

<span data-ttu-id="4b1b8-127">コントロールがマウス入力を処理する方法は、コントロールから派生させ、<xref:System.Windows.Forms.Control.GetStyle%2A> と <xref:System.Windows.Forms.Control.SetStyle%2A> のメソッドを使用することで検出して変更することができます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-127">You can detect and change the way a control handles mouse input by deriving from the control and using the <xref:System.Windows.Forms.Control.GetStyle%2A> and <xref:System.Windows.Forms.Control.SetStyle%2A> methods.</span></span> <span data-ttu-id="4b1b8-128"><xref:System.Windows.Forms.Control.SetStyle%2A> メソッドは、<xref:System.Windows.Forms.ControlStyles> 値のビットごとの組み合わせを取得して、コントロールに標準のクリック、ダブルクリックの動作が含まれるかどうか、またはコントロールにより独自のマウス処理が対処されるかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-128">The <xref:System.Windows.Forms.Control.SetStyle%2A> method takes a bitwise combination of <xref:System.Windows.Forms.ControlStyles> values to determine whether the control will have standard click, double-click behavior, or if the control will handle its own mouse processing.</span></span> <span data-ttu-id="4b1b8-129">さらに、<xref:System.Windows.Forms.SystemInformation> クラスには、マウスの機能を説明し、マウスがオペレーティング システムとどのように対話するかを指定するプロパティが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-129">Also, the <xref:System.Windows.Forms.SystemInformation> class includes properties that describe the capabilities of the mouse and specify how the mouse interacts with the operating system.</span></span> <span data-ttu-id="4b1b8-130">次の表に、これらのプロパティを要約します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-130">The following table summarizes these properties.</span></span>

| <span data-ttu-id="4b1b8-131">プロパティ</span><span class="sxs-lookup"><span data-stu-id="4b1b8-131">Property</span></span>                                                               | <span data-ttu-id="4b1b8-132">説明</span><span class="sxs-lookup"><span data-stu-id="4b1b8-132">Description</span></span>                                                                                                                                                            |
|------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <xref:System.Windows.Forms.SystemInformation.DoubleClickSize%2A>       | <span data-ttu-id="4b1b8-133">2 回のクリックがダブルクリックであるとオペレーティング システムに認識されるために、ユーザーがクリックする 2 つの位置が含まれている必要がある範囲のサイズ (ピクセル単位) を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-133">Gets the dimensions, in pixels, of the area in which the user must click twice for the operating system to consider the two clicks a double-click.</span></span>                     |
| <xref:System.Windows.Forms.SystemInformation.DoubleClickTime%2A>       | <span data-ttu-id="4b1b8-134">マウスのアクションがダブルクリックであると認識されるための、1 回目のクリックと 2 回目のクリックの間の最大経過時間 (ミリ秒単位) を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-134">Gets the maximum number of milliseconds that can elapse between a first click and a second click for the mouse action to be considered a double-click.</span></span> |
| <xref:System.Windows.Forms.SystemInformation.MouseButtons%2A>          | <span data-ttu-id="4b1b8-135">マウスのボタンの数を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-135">Gets the number of buttons on the mouse.</span></span>                                                                                                                               |
| <xref:System.Windows.Forms.SystemInformation.MouseButtonsSwapped%2A>   | <span data-ttu-id="4b1b8-136">左右のマウス ボタンの機能が入れ替わっているかどうかを示す値を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-136">Gets a value indicating whether the functions of the left and right mouse buttons have been swapped.</span></span>                                                                   |
| <xref:System.Windows.Forms.SystemInformation.MouseHoverSize%2A>        | <span data-ttu-id="4b1b8-137">マウス静止メッセージが生成されるためにマウス静止時間が経過するまでマウス ポインターをとどめておく必要がある四角形の領域のサイズ (ピクセル単位) を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-137">Gets the dimensions, in pixels, of the rectangle within which the mouse pointer has to stay for the mouse hover time before a mouse hover message is generated.</span></span>        |
| <xref:System.Windows.Forms.SystemInformation.MouseHoverTime%2A>        | <span data-ttu-id="4b1b8-138">マウス静止メッセージが生成されるために静止領域内にマウス ポインターをとどめておく必要がある時間 (ミリ秒単位) を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-138">Gets the time, in milliseconds, that the mouse pointer has to stay in the hover rectangle before a mouse hover message is generated.</span></span>                                   |
| <xref:System.Windows.Forms.SystemInformation.MousePresent%2A>          | <span data-ttu-id="4b1b8-139">マウスが取り付けられているかどうかを示す値を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-139">Gets a value indicating whether a mouse is installed.</span></span>                                                                                                                  |
| <xref:System.Windows.Forms.SystemInformation.MouseSpeed%2A>            | <span data-ttu-id="4b1b8-140">現在のマウスの速度を示す値 (1 から 20) を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-140">Gets a value indicating the current mouse speed, from 1 to 20.</span></span>                                                                                                         |
| <xref:System.Windows.Forms.SystemInformation.MouseWheelPresent%2A>     | <span data-ttu-id="4b1b8-141">マウス ホイール付きのマウスが取り付けられているかどうかを示す値を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-141">Gets a value indicating whether a mouse with a mouse wheel is installed.</span></span>                                                                                               |
| <xref:System.Windows.Forms.SystemInformation.MouseWheelScrollDelta%2A> | <span data-ttu-id="4b1b8-142">マウス ホイールの 1 目盛りの回転で増分される差分値を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-142">Gets the amount of the delta value of the increment of a single mouse wheel rotation.</span></span>                                                                                  |
| <xref:System.Windows.Forms.SystemInformation.MouseWheelScrollLines%2A> | <span data-ttu-id="4b1b8-143">マウス ホイールを回転したときにスクロールする行数を取得します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-143">Gets the number of lines to scroll when the mouse wheel is rotated.</span></span>                                                                                                    |

## <a name="methods-that-process-user-input-messages"></a><span data-ttu-id="4b1b8-144">ユーザー入力メッセージを処理するメソッド</span><span class="sxs-lookup"><span data-stu-id="4b1b8-144">Methods that process user input messages</span></span>

<span data-ttu-id="4b1b8-145">フォームとコントロールは、<xref:System.Windows.Forms.IMessageFilter> インターフェイス、およびメッセージ キュー内のさまざまなポイントで Windows メッセージを処理するオーバーライド可能なメソッドのセットにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-145">Forms and controls have access to the <xref:System.Windows.Forms.IMessageFilter> interface and a set of overridable methods that process Windows messages at different points in the message queue.</span></span> <span data-ttu-id="4b1b8-146">これらのメソッドにはすべて、Windows メッセージの下位レベルの詳細をカプセル化する <xref:System.Windows.Forms.Message> パラメーターが含まれています。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-146">These methods all have a <xref:System.Windows.Forms.Message> parameter, which encapsulates the low-level details of Windows messages.</span></span> <span data-ttu-id="4b1b8-147">これらのメソッドを実装またはオーバーライドしてメッセージを確認し、メッセージを使用するか、またはメッセージ キュー内の次のコンシューマーに渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-147">You can implement or override these methods to examine the message and then either consume the message or pass it on to the next consumer in the message queue.</span></span> <span data-ttu-id="4b1b8-148">次の表に、Windows フォームのすべての Windows メッセージを処理するメソッドを示します。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-148">The following table presents the methods that process all Windows messages in Windows Forms.</span></span>

| <span data-ttu-id="4b1b8-149">メソッド</span><span class="sxs-lookup"><span data-stu-id="4b1b8-149">Method</span></span>     | <span data-ttu-id="4b1b8-150">メモ</span><span class="sxs-lookup"><span data-stu-id="4b1b8-150">Notes</span></span> |
|------------|-----------|
| <xref:System.Windows.Forms.IMessageFilter.PreFilterMessage%2A> | <span data-ttu-id="4b1b8-151">このメソッドにより、キューに登録済み (ポスト済みとも呼ばれる) の Windows メッセージはアプリケーション レベルでインターセプトされます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-151">This method intercepts queued (also known as posted) Windows messages at the application level.</span></span>|
| <xref:System.Windows.Forms.Control.PreProcessMessage%2A>       | <span data-ttu-id="4b1b8-152">このメソッドにより、Windows メッセージが、処理される前に、フォームおよびコントロール レベルでインターセプトされます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-152">This method intercepts Windows messages at the form and control level before they have been processed.</span></span>|
| <xref:System.Windows.Forms.Control.WndProc%2A>                 | <span data-ttu-id="4b1b8-153">このメソッドにより、Windows メッセージはフォームおよびコントロール レベルで処理されます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-153">This method processes Windows messages at the form and control level.</span></span>|
| <xref:System.Windows.Forms.Control.DefWndProc%2A>              | <span data-ttu-id="4b1b8-154">このメソッドにより、Windows メッセージの既定の処理はフォームおよびコントロール レベルで実行されます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-154">This method performs the default processing of Windows messages at the form and control level.</span></span> <span data-ttu-id="4b1b8-155">これにより、Windows の最小限の機能が提供されます。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-155">This provides the minimal functionality of a window.</span></span>|
| <xref:System.Windows.Forms.Control.OnNotifyMessage%2A>         | <span data-ttu-id="4b1b8-156">このメソッドは、メッセージを、それが処理された後にフォームとコントロール レベルで受け取ります。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-156">This method intercepts messages at the form and control level, after they've been processed.</span></span> <span data-ttu-id="4b1b8-157">このメソッドが呼び出されるようにするには、<xref:System.Windows.Forms.ControlStyles.EnableNotifyMessage> スタイルのビットを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4b1b8-157">The <xref:System.Windows.Forms.ControlStyles.EnableNotifyMessage> style bit must be set for this method to be called.</span></span>|

## <a name="see-also"></a><span data-ttu-id="4b1b8-158">関連項目</span><span class="sxs-lookup"><span data-stu-id="4b1b8-158">See also</span></span>

- [<span data-ttu-id="4b1b8-159">マウス イベントの使用 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="4b1b8-159">Using mouse events (Windows Forms .NET)</span></span>](events.md)
- [<span data-ttu-id="4b1b8-160">ドラッグ アンド ドロップによるマウス動作の概要 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="4b1b8-160">Drag-and-drop mouse behavior overview (Windows Forms .NET)</span></span>](drag-and-drop.md)
- [<span data-ttu-id="4b1b8-161">マウス ポインターを管理する (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="4b1b8-161">Manage mouse pointers (Windows Forms .NET)</span></span>](how-to-manage-cursor-pointer.md)
