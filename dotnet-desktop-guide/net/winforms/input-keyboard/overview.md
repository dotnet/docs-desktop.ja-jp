---
title: キーボード入力の概要
description: .NET 用 Windows フォームでのキーボード入力のしくみについて説明します。 キーボード イベントはフォームおよびコントロールによって発生し、ボタンの押下または解放を表します。
ms.date: 10/26/2020
ms.topic: overview
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Windows Forms, keyboard input
- keyboard [Windows Forms], input
ms.openlocfilehash: dbebc89b4ec9e5824f7a1b44a75fe313c4ab683b
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/09/2020
ms.locfileid: "96942178"
---
# <a name="overview-of-using-the-keyboard-windows-forms-net"></a><span data-ttu-id="823ba-104">キーボードの使用の概要 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-104">Overview of using the keyboard (Windows Forms .NET)</span></span>

<span data-ttu-id="823ba-105">Windows フォームでは、ユーザー入力は、[Windows メッセージ](/windows/win32/winmsg/about-messages-and-message-queues)の形式でアプリケーションに送信されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-105">In Windows Forms, user input is sent to applications in the form of [Windows messages](/windows/win32/winmsg/about-messages-and-message-queues).</span></span> <span data-ttu-id="823ba-106">一連のオーバーライド可能なメソッドにより、これらのメッセージは、アプリケーション、フォーム、コントロールのレベルで処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-106">A series of overridable methods process these messages at the application, form, and control level.</span></span> <span data-ttu-id="823ba-107">これらのメソッドにより、キーボード メッセージが受信されると、キーボード入力に関する情報を取得するために処理できるイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-107">When these methods receive keyboard messages, they raise events that can be handled to get information about the keyboard input.</span></span> <span data-ttu-id="823ba-108">多くの場合、Windows フォーム アプリケーションは、これらのイベントに対処するだけで、すべてのユーザー入力を処理できます。</span><span class="sxs-lookup"><span data-stu-id="823ba-108">In many cases, Windows Forms applications will be able to process all user input simply by handling these events.</span></span> <span data-ttu-id="823ba-109">それ以外の場合は、アプリケーション、フォーム、またはコントロールで受信される前に特定のメッセージをインターセプトするために、アプリケーションで、メッセージを処理するメソッドの 1 つをオーバーライドすることが必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="823ba-109">In other cases, an application may need to override one of the methods that process messages in order to intercept a particular message before it is received by the application, form, or control.</span></span>

[!INCLUDE [desktop guide under construction](../../includes/desktop-guide-preview-note.md)]

## <a name="keyboard-events"></a><span data-ttu-id="823ba-110">キーボード イベント</span><span class="sxs-lookup"><span data-stu-id="823ba-110">Keyboard events</span></span>

<span data-ttu-id="823ba-111">すべての Windows フォーム コントロールは、マウスおよびキーボード入力に関連する一連のイベントを継承します。</span><span class="sxs-lookup"><span data-stu-id="823ba-111">All Windows Forms controls inherit a set of events related to mouse and keyboard input.</span></span> <span data-ttu-id="823ba-112">たとえば、コントロールでは、<xref:System.Windows.Forms.Control.KeyPress> イベントを処理し、押下されたキーの文字コードを判断できます。</span><span class="sxs-lookup"><span data-stu-id="823ba-112">For example, a control can handle the <xref:System.Windows.Forms.Control.KeyPress> event to determine the character code of a key that was pressed.</span></span> <span data-ttu-id="823ba-113">詳細については、「[キーボード イベントの使用](events.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="823ba-113">For more information, see [Using keyboard events](events.md).</span></span>

## <a name="methods-that-process-user-input-messages"></a><span data-ttu-id="823ba-114">ユーザー入力メッセージを処理するメソッド</span><span class="sxs-lookup"><span data-stu-id="823ba-114">Methods that process user input messages</span></span>

<span data-ttu-id="823ba-115">フォームとコントロールは、<xref:System.Windows.Forms.IMessageFilter> インターフェイス、およびメッセージ キュー内のさまざまなポイントで Windows メッセージを処理するオーバーライド可能なメソッドのセットにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="823ba-115">Forms and controls have access to the <xref:System.Windows.Forms.IMessageFilter> interface and a set of overridable methods that process Windows messages at different points in the message queue.</span></span> <span data-ttu-id="823ba-116">これらのメソッドにはすべて、Windows メッセージの下位レベルの詳細をカプセル化する <xref:System.Windows.Forms.Message> パラメーターが含まれています。</span><span class="sxs-lookup"><span data-stu-id="823ba-116">These methods all have a <xref:System.Windows.Forms.Message> parameter, which encapsulates the low-level details of Windows messages.</span></span> <span data-ttu-id="823ba-117">これらのメソッドを実装またはオーバーライドしてメッセージを確認し、メッセージを使用するか、またはメッセージ キュー内の次のコンシューマーに渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="823ba-117">You can implement or override these methods to examine the message and then either consume the message or pass it on to the next consumer in the message queue.</span></span> <span data-ttu-id="823ba-118">次の表に、Windows フォームのすべての Windows メッセージを処理するメソッドを示します。</span><span class="sxs-lookup"><span data-stu-id="823ba-118">The following table presents the methods that process all Windows messages in Windows Forms.</span></span>

| <span data-ttu-id="823ba-119">メソッド</span><span class="sxs-lookup"><span data-stu-id="823ba-119">Method</span></span>     | <span data-ttu-id="823ba-120">メモ</span><span class="sxs-lookup"><span data-stu-id="823ba-120">Notes</span></span> |
|------------|-----------|
| <xref:System.Windows.Forms.IMessageFilter.PreFilterMessage%2A> | <span data-ttu-id="823ba-121">このメソッドにより、キューに登録済み (ポスト済みとも呼ばれる) の Windows メッセージはアプリケーション レベルでインターセプトされます。</span><span class="sxs-lookup"><span data-stu-id="823ba-121">This method intercepts queued (also known as posted) Windows messages at the application level.</span></span>|
| <xref:System.Windows.Forms.Control.PreProcessMessage%2A>       | <span data-ttu-id="823ba-122">このメソッドにより、Windows メッセージが、処理される前に、フォームおよびコントロール レベルでインターセプトされます。</span><span class="sxs-lookup"><span data-stu-id="823ba-122">This method intercepts Windows messages at the form and control level before they have been processed.</span></span>|
| <xref:System.Windows.Forms.Control.WndProc%2A>                 | <span data-ttu-id="823ba-123">このメソッドにより、Windows メッセージはフォームおよびコントロール レベルで処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-123">This method processes Windows messages at the form and control level.</span></span>|
| <xref:System.Windows.Forms.Control.DefWndProc%2A>              | <span data-ttu-id="823ba-124">このメソッドにより、Windows メッセージの既定の処理はフォームおよびコントロール レベルで実行されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-124">This method performs the default processing of Windows messages at the form and control level.</span></span> <span data-ttu-id="823ba-125">これにより、Windows の最小限の機能が提供されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-125">This provides the minimal functionality of a window.</span></span>|
| <xref:System.Windows.Forms.Control.OnNotifyMessage%2A>         | <span data-ttu-id="823ba-126">このメソッドにより、メッセージは、処理された後、フォームおよびコントロール レベルでインターセプトされます。</span><span class="sxs-lookup"><span data-stu-id="823ba-126">This method intercepts messages at the form and control level, after they have been processed.</span></span> <span data-ttu-id="823ba-127">このメソッドが呼び出されるようにするには、<xref:System.Windows.Forms.ControlStyles.EnableNotifyMessage> スタイルのビットを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="823ba-127">The <xref:System.Windows.Forms.ControlStyles.EnableNotifyMessage> style bit must be set for this method to be called.</span></span>|

<span data-ttu-id="823ba-128">キーボードおよびマウス メッセージは、これらの種類のメッセージ固有のオーバーライド可能なメソッドの追加セットによっても処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-128">Keyboard and mouse messages are also processed by an additional set of overridable methods that are specific to those types of messages.</span></span> <span data-ttu-id="823ba-129">詳細については、「[キーの前処理](#preprocessing-keys)」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="823ba-129">For more information, see the [Preprocessing keys](#preprocessing-keys) section.</span></span> <!-- TODO mouse link --><span data-ttu-id="823ba-130">.</span><span class="sxs-lookup"><span data-stu-id="823ba-130">.</span></span>

## <a name="types-of-keys"></a><span data-ttu-id="823ba-131">キーの種類</span><span class="sxs-lookup"><span data-stu-id="823ba-131">Types of keys</span></span>

<span data-ttu-id="823ba-132">Windows フォームでは、キーボード入力をビット単位の <xref:System.Windows.Forms.Keys> 列挙型で表される仮想キー コードとして識別します。</span><span class="sxs-lookup"><span data-stu-id="823ba-132">Windows Forms identifies keyboard input as virtual-key codes that are represented by the bitwise <xref:System.Windows.Forms.Keys> enumeration.</span></span> <span data-ttu-id="823ba-133"><xref:System.Windows.Forms.Keys> 列挙型を使用すると、押下された一連のキーを組み合わせて単一の値を生成できます。</span><span class="sxs-lookup"><span data-stu-id="823ba-133">With the <xref:System.Windows.Forms.Keys> enumeration, you can combine a series of pressed keys to result in a single value.</span></span> <span data-ttu-id="823ba-134">これらの値は、Windows メッセージ **WM_KEYDOWN** および **WM_SYSKEYDOWN** に付随する値に対応します。</span><span class="sxs-lookup"><span data-stu-id="823ba-134">These values correspond to the values that accompany the **WM_KEYDOWN** and **WM_SYSKEYDOWN** Windows messages.</span></span> <span data-ttu-id="823ba-135">ほとんどの物理的なキーの押下は、<xref:System.Windows.Forms.Control.KeyDown> または <xref:System.Windows.Forms.Control.KeyUp> イベントを処理することによって検出できます。</span><span class="sxs-lookup"><span data-stu-id="823ba-135">You can detect most physical key presses by handling the <xref:System.Windows.Forms.Control.KeyDown> or <xref:System.Windows.Forms.Control.KeyUp> events.</span></span> <span data-ttu-id="823ba-136">文字キーは <xref:System.Windows.Forms.Keys> 列挙型のサブセットであり、Windows メッセージ **WM_CHAR** および **WM_SYSCHAR** に付随する値に対応します。</span><span class="sxs-lookup"><span data-stu-id="823ba-136">Character keys are a subset of the <xref:System.Windows.Forms.Keys> enumeration and correspond to the values that accompany the **WM_CHAR** and **WM_SYSCHAR** Windows messages.</span></span> <span data-ttu-id="823ba-137">押下されたキーを組み合わせて文字が生成される場合、<xref:System.Windows.Forms.Control.KeyPress> イベントを処理することにより、その文字を検出できます。</span><span class="sxs-lookup"><span data-stu-id="823ba-137">If the combination of pressed keys results in a character, you can detect the character by handling the <xref:System.Windows.Forms.Control.KeyPress> event.</span></span> <!-- TODO is this still valid with .NET Core/5 ?? Alternatively, you can use <xref:Microsoft.VisualBasic.Devices.Keyboard>, exposed by Visual Basic programming interface, to discover which keys were pressed and send keys. For more information, see [Accessing the Keyboard](../../visual-basic/developing-apps/programming/computer-resources/accessing-the-keyboard.md).-->

## <a name="order-of-keyboard-events"></a><span data-ttu-id="823ba-138">キーボード イベントの順序</span><span class="sxs-lookup"><span data-stu-id="823ba-138">Order of keyboard events</span></span>

<span data-ttu-id="823ba-139">先に説明したとおり、コントロール上では 3 つのキーボード関連のイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-139">As listed previously, there are 3 keyboard related events that can occur on a control.</span></span> <span data-ttu-id="823ba-140">イベントは一般に次の順序で発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-140">The following sequence shows the general order of the events:</span></span>

01. <span data-ttu-id="823ba-141">ユーザーが "a" キーを押すと、キーが前処理されてディスパッチされ、<xref:System.Windows.Forms.Control.KeyDown> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-141">The user pushes the "a" key, the key is preprocessed, dispatched, and a <xref:System.Windows.Forms.Control.KeyDown> event occurs.</span></span>
01. <span data-ttu-id="823ba-142">ユーザーは "a" キーを押したままで、キーが前処理されてディスパッチされ、<xref:System.Windows.Forms.Control.KeyPress> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-142">The user holds the "a" key, the key is preprocessed, dispatched, and a <xref:System.Windows.Forms.Control.KeyPress> event occurs.</span></span>
    <span data-ttu-id="823ba-143">このイベントはユーザーがキーを押し続けているとき複数回発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-143">This event occurs multiple times as the user holds a key.</span></span>
01. <span data-ttu-id="823ba-144">ユーザーが "a" キーを解放すると、キーが前処理されてディスパッチされ、<xref:System.Windows.Forms.Control.KeyUp> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-144">The user releases the "a" key, the key is preprocessed, dispatched and a <xref:System.Windows.Forms.Control.KeyUp> event occurs.</span></span>

## <a name="preprocessing-keys"></a><span data-ttu-id="823ba-145">キーの前処理</span><span class="sxs-lookup"><span data-stu-id="823ba-145">Preprocessing keys</span></span>

<span data-ttu-id="823ba-146">他のメッセージと同様に、キーボード メッセージは、フォームまたはコントロールの <xref:System.Windows.Forms.Control.WndProc%2A> メソッドで処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-146">Like other messages, keyboard messages are processed in the <xref:System.Windows.Forms.Control.WndProc%2A> method of a form or control.</span></span> <span data-ttu-id="823ba-147">ただし、キーボード メッセージが処理される前に、<xref:System.Windows.Forms.Control.PreProcessMessage%2A> メソッドによって 1 つ以上のメソッドが呼び出されます。これらをオーバーライドして、特殊文字キーと物理キーを扱うことができます。</span><span class="sxs-lookup"><span data-stu-id="823ba-147">However, before keyboard messages are processed, the <xref:System.Windows.Forms.Control.PreProcessMessage%2A> method calls one or more methods that can be overridden to handle special character keys and physical keys.</span></span> <span data-ttu-id="823ba-148">これらのメソッドをオーバーライドすると、コントロールがメッセージを処理する前に、特定のキーを検出してフィルターできます。</span><span class="sxs-lookup"><span data-stu-id="823ba-148">You can override these methods to detect and filter certain keys before the messages are processed by the control.</span></span> <span data-ttu-id="823ba-149">次の表に、実行される処理と、そのとき呼び出されるメソッドを、メソッドが呼び出される順に示します。</span><span class="sxs-lookup"><span data-stu-id="823ba-149">The following table shows the action that is being performed and the related method that occurs, in the order that the method occurs.</span></span>

### <a name="preprocessing-for-a-keydown-event"></a><span data-ttu-id="823ba-150">KeyDown イベントの前処理</span><span class="sxs-lookup"><span data-stu-id="823ba-150">Preprocessing for a KeyDown event</span></span>

|<span data-ttu-id="823ba-151">アクション</span><span class="sxs-lookup"><span data-stu-id="823ba-151">Action</span></span>|<span data-ttu-id="823ba-152">関連メソッド</span><span class="sxs-lookup"><span data-stu-id="823ba-152">Related method</span></span>|<span data-ttu-id="823ba-153">Notes</span><span class="sxs-lookup"><span data-stu-id="823ba-153">Notes</span></span>|
|------------|--------------------|-----------|
|<span data-ttu-id="823ba-154">アクセラレータやメニュー ショートカットなどのコマンド キーの確認。</span><span class="sxs-lookup"><span data-stu-id="823ba-154">Check for a command key such as an accelerator or menu shortcut.</span></span>|<xref:System.Windows.Forms.Control.ProcessCmdKey%2A>|<span data-ttu-id="823ba-155">このメソッドはコマンド キーを処理します。コマンド キーは通常のキーよりも優先順位が上です。</span><span class="sxs-lookup"><span data-stu-id="823ba-155">This method processes a command key, which takes precedence over regular keys.</span></span> <span data-ttu-id="823ba-156">このメソッドが `true` を返した場合、キー メッセージはディスパッチされず、キー イベントも発生しません。</span><span class="sxs-lookup"><span data-stu-id="823ba-156">If this method returns `true`, the key message is not dispatched and a key event does not occur.</span></span> <span data-ttu-id="823ba-157">`false`が返される場合、<xref:System.Windows.Forms.Control.IsInputKey%2A> が呼び出されます`.`</span><span class="sxs-lookup"><span data-stu-id="823ba-157">If it returns `false`, <xref:System.Windows.Forms.Control.IsInputKey%2A> is called`.`</span></span>|
|<span data-ttu-id="823ba-158">前処理を必要とする特殊キーであるか、または <xref:System.Windows.Forms.Control.KeyDown> イベントを発生させ、コントロールにディスパッチされる必要がある通常の文字キーであるかを確認します。</span><span class="sxs-lookup"><span data-stu-id="823ba-158">Check for a special key that requires preprocessing or a normal character key that should raise a <xref:System.Windows.Forms.Control.KeyDown> event and be dispatched to a control.</span></span>|<xref:System.Windows.Forms.Control.IsInputKey%2A>|<span data-ttu-id="823ba-159">メソッドによって `true`が返される場合、コントロールが通常の文字で、<xref:System.Windows.Forms.Control.KeyDown> イベントが発生することを意味します。</span><span class="sxs-lookup"><span data-stu-id="823ba-159">If the method returns `true`, it means the control is a regular character and a <xref:System.Windows.Forms.Control.KeyDown> event is raised.</span></span> <span data-ttu-id="823ba-160">`false`の場合、<xref:System.Windows.Forms.Control.ProcessDialogKey%2A> が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-160">If `false`, <xref:System.Windows.Forms.Control.ProcessDialogKey%2A> is called.</span></span> <span data-ttu-id="823ba-161">**注:** コントロールでキーまたはキーの組み合わせを確実に取得するために、<xref:System.Windows.Forms.Control.PreviewKeyDown> イベントを処理し、対象の 1 つまたは複数のキーの <xref:System.Windows.Forms.PreviewKeyDownEventArgs> の <xref:System.Windows.Forms.PreviewKeyDownEventArgs.IsInputKey%2A> を `true` に設定することができます。</span><span class="sxs-lookup"><span data-stu-id="823ba-161">**Note:**  To ensure a control gets a key or combination of keys, you can handle the <xref:System.Windows.Forms.Control.PreviewKeyDown> event and set <xref:System.Windows.Forms.PreviewKeyDownEventArgs.IsInputKey%2A> of the <xref:System.Windows.Forms.PreviewKeyDownEventArgs> to `true` for the key or keys you want.</span></span>|
|<span data-ttu-id="823ba-162">移動キー (Esc、Tab、Return、または方向キー) の確認。</span><span class="sxs-lookup"><span data-stu-id="823ba-162">Check for a navigation key (ESC, TAB, Return, or arrow keys).</span></span>|<xref:System.Windows.Forms.Control.ProcessDialogKey%2A>|<span data-ttu-id="823ba-163">このメソッドはコントロール内で特別な機能 (コントロールとその親コントロールの間のフォーカスの切り替えなど) を実行する物理キーを処理します。</span><span class="sxs-lookup"><span data-stu-id="823ba-163">This method processes a physical key that employs special functionality within the control, such as switching focus between the control and its parent.</span></span> <span data-ttu-id="823ba-164">即時コントロールでキーが処理されない場合、親コントロールで <xref:System.Windows.Forms.Control.ProcessDialogKey%2A> が呼び出されます。それでも処理されなければ、コントロールの呼び出しが階層構造の最上位のコントロールまで続けられます。</span><span class="sxs-lookup"><span data-stu-id="823ba-164">If the immediate control does not handle the key, the <xref:System.Windows.Forms.Control.ProcessDialogKey%2A> is called on the parent control and so on to the topmost control in the hierarchy.</span></span> <span data-ttu-id="823ba-165">このメソッドが `true` を返した場合、前処理は完了し、キー イベントは生成されません。</span><span class="sxs-lookup"><span data-stu-id="823ba-165">If this method returns `true`, preprocessing is complete and a key event is not generated.</span></span> <span data-ttu-id="823ba-166">`false` が返される場合、<xref:System.Windows.Forms.Control.KeyDown> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-166">If it returns `false`, a <xref:System.Windows.Forms.Control.KeyDown> event occurs.</span></span>|

### <a name="preprocessing-for-a-keypress-event"></a><span data-ttu-id="823ba-167">KeyPress イベントの前処理</span><span class="sxs-lookup"><span data-stu-id="823ba-167">Preprocessing for a KeyPress event</span></span>

|<span data-ttu-id="823ba-168">アクション</span><span class="sxs-lookup"><span data-stu-id="823ba-168">Action</span></span>|<span data-ttu-id="823ba-169">関連メソッド</span><span class="sxs-lookup"><span data-stu-id="823ba-169">Related method</span></span>|<span data-ttu-id="823ba-170">Notes</span><span class="sxs-lookup"><span data-stu-id="823ba-170">Notes</span></span>|
|------------|--------------------|-----------|
|<span data-ttu-id="823ba-171">キーがコントロールによって処理される通常の文字であるかどうかの確認</span><span class="sxs-lookup"><span data-stu-id="823ba-171">Check to see the key is a normal character that should be processed by the control</span></span>|<xref:System.Windows.Forms.Control.IsInputChar%2A>|<span data-ttu-id="823ba-172">文字が通常の文字である場合は、このメソッドによって `true` が返され、<xref:System.Windows.Forms.Control.KeyPress> イベントが発生します。それ以上の処理は行われません。</span><span class="sxs-lookup"><span data-stu-id="823ba-172">If the character is a normal character, this method returns `true`, the <xref:System.Windows.Forms.Control.KeyPress> event is raised and no further preprocessing occurs.</span></span> <span data-ttu-id="823ba-173">それ以外の場合、<xref:System.Windows.Forms.Control.ProcessDialogChar%2A> が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-173">Otherwise <xref:System.Windows.Forms.Control.ProcessDialogChar%2A> will be called.</span></span>|
|<span data-ttu-id="823ba-174">文字がニーモニック (ボタン上の &OK など) かどうかの確認</span><span class="sxs-lookup"><span data-stu-id="823ba-174">Check to see if the character is a mnemonic (such as &OK on a button)</span></span>|<xref:System.Windows.Forms.Control.ProcessDialogChar%2A>|<span data-ttu-id="823ba-175">このメソッドは、<xref:System.Windows.Forms.Control.ProcessDialogKey%2A>と同様に、コントロール階層の上位まで呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-175">This method, similar to <xref:System.Windows.Forms.Control.ProcessDialogKey%2A>, will be called up the control hierarchy.</span></span> <span data-ttu-id="823ba-176">コントロールがコンテナー コントロールである場合、それ自体と子コントロールで <xref:System.Windows.Forms.Control.ProcessMnemonic%2A> を呼び出すことにより、ニーモニックの確認が行われます。</span><span class="sxs-lookup"><span data-stu-id="823ba-176">If the control is a container control, it checks for mnemonics by calling <xref:System.Windows.Forms.Control.ProcessMnemonic%2A> on itself and its child controls.</span></span> <span data-ttu-id="823ba-177"><xref:System.Windows.Forms.Control.ProcessDialogChar%2A> によって `true`が返される場合、<xref:System.Windows.Forms.Control.KeyPress> イベントは発生しません。</span><span class="sxs-lookup"><span data-stu-id="823ba-177">If <xref:System.Windows.Forms.Control.ProcessDialogChar%2A> returns `true`, a <xref:System.Windows.Forms.Control.KeyPress> event does not occur.</span></span>|

## <a name="processing-keyboard-messages"></a><span data-ttu-id="823ba-178">キーボード メッセージの処理</span><span class="sxs-lookup"><span data-stu-id="823ba-178">Processing keyboard messages</span></span>

<span data-ttu-id="823ba-179">キーボード メッセージは、フォームまたはコントロールの <xref:System.Windows.Forms.Control.WndProc%2A> メソッドに到達すると、オーバーライド可能な一連のメソッドによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-179">After keyboard messages reach the <xref:System.Windows.Forms.Control.WndProc%2A> method of a form or control, they are processed by a set of methods that can be overridden.</span></span> <span data-ttu-id="823ba-180">これらの各メソッドによって、<xref:System.Boolean> 値が返されます。これは、キーボード メッセージがコントロールによって処理され、使用されたかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="823ba-180">Each of these methods returns a <xref:System.Boolean> value specifying whether the keyboard message has been processed and consumed by the control.</span></span> <span data-ttu-id="823ba-181">いずれかのメソッドが `true` を返した場合は、メッセージが処理されたと判断されるため、ベース コントロールまたは親コントロールにメッセージが渡されることはありません。</span><span class="sxs-lookup"><span data-stu-id="823ba-181">If one of the methods returns `true`, then the message is considered handled, and it is not passed to the control's base or parent for further processing.</span></span> <span data-ttu-id="823ba-182">そうでない場合は、メッセージがメッセージ キューに残り、場合によってはそのコントロールのベースまたは親に含まれる別のメソッドで処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-182">Otherwise, the message stays in the message queue and may be processed in another method in the control's base or parent.</span></span> <span data-ttu-id="823ba-183">次の表に、キーボード メッセージを処理するメソッドを示します。</span><span class="sxs-lookup"><span data-stu-id="823ba-183">The following table presents the methods that process keyboard messages.</span></span>

|<span data-ttu-id="823ba-184">メソッド</span><span class="sxs-lookup"><span data-stu-id="823ba-184">Method</span></span>|<span data-ttu-id="823ba-185">メモ</span><span class="sxs-lookup"><span data-stu-id="823ba-185">Notes</span></span>|
|------------|-----------|
|<xref:System.Windows.Forms.Control.ProcessKeyMessage%2A>|<span data-ttu-id="823ba-186">このメソッドによって、コントロールの <xref:System.Windows.Forms.Control.WndProc%2A> メソッドによって受信されたすべてのキーボード メッセージが処理されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-186">This method processes all keyboard messages that are received by the <xref:System.Windows.Forms.Control.WndProc%2A> method of the control.</span></span>|
|<xref:System.Windows.Forms.Control.ProcessKeyPreview%2A>|<span data-ttu-id="823ba-187">このメソッドは、キーボード メッセージを親コントロールに送信します。</span><span class="sxs-lookup"><span data-stu-id="823ba-187">This method sends the keyboard message to the control's parent.</span></span> <span data-ttu-id="823ba-188"><xref:System.Windows.Forms.Control.ProcessKeyPreview%2A> によって `true`が返された場合、キー イベントは生成されます。それ以外の場合、<xref:System.Windows.Forms.Control.ProcessKeyEventArgs%2A> が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="823ba-188">If <xref:System.Windows.Forms.Control.ProcessKeyPreview%2A> returns `true`, no key event is generated, otherwise <xref:System.Windows.Forms.Control.ProcessKeyEventArgs%2A> is called.</span></span>|
|<xref:System.Windows.Forms.Control.ProcessKeyEventArgs%2A>|<span data-ttu-id="823ba-189">このメソッドにより、必要に応じて、<xref:System.Windows.Forms.Control.KeyDown>、<xref:System.Windows.Forms.Control.KeyPress>、<xref:System.Windows.Forms.Control.KeyUp> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="823ba-189">This method raises the <xref:System.Windows.Forms.Control.KeyDown>, <xref:System.Windows.Forms.Control.KeyPress>, and <xref:System.Windows.Forms.Control.KeyUp> events, as appropriate.</span></span>|

## <a name="overriding-keyboard-methods"></a><span data-ttu-id="823ba-190">キーボード メソッドのオーバーライド</span><span class="sxs-lookup"><span data-stu-id="823ba-190">Overriding keyboard methods</span></span>

<span data-ttu-id="823ba-191">キーボード メッセージを処理するためにオーバーライドできるメソッドは多数ありますが、どのメソッドを選ぶかが非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="823ba-191">There are many methods available for overriding when a keyboard message is preprocessed and processed; however, some methods are much better choices than others.</span></span> <span data-ttu-id="823ba-192">次の表に、実行するタスクと、キーボード メソッドをオーバーライドする最善の方法を示します。</span><span class="sxs-lookup"><span data-stu-id="823ba-192">Following table shows tasks you might want to accomplish and the best way to override the keyboard methods.</span></span> <span data-ttu-id="823ba-193">メソッドのオーバーライドの詳細については、「[継承 (C# プログラミング ガイド)](/dotnet/csharp/programming-guide/classes-and-structs/inheritance.md#abstract-and-virtual-methods)」 または [継承 (Visual Basic)](/dotnet/visual-basic/programming-guide/language-features/objects-and-classes/inheritance-basics.md#overriding-properties-and-methods-in-derived-classes) に関する記事を参照してください</span><span class="sxs-lookup"><span data-stu-id="823ba-193">For more information on overriding methods, see [Inheritance (C# Programming Guide)](/dotnet/csharp/programming-guide/classes-and-structs/inheritance.md#abstract-and-virtual-methods) or [Inheritance (Visual Basic)](/dotnet/visual-basic/programming-guide/language-features/objects-and-classes/inheritance-basics.md#overriding-properties-and-methods-in-derived-classes)</span></span>

|<span data-ttu-id="823ba-194">タスク</span><span class="sxs-lookup"><span data-stu-id="823ba-194">Task</span></span>|<span data-ttu-id="823ba-195">メソッド</span><span class="sxs-lookup"><span data-stu-id="823ba-195">Method</span></span>|
|----------|------------|
|<span data-ttu-id="823ba-196">ナビゲーション キーをインターセプトして、<xref:System.Windows.Forms.Control.KeyDown> イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="823ba-196">Intercept a navigation key and raise a <xref:System.Windows.Forms.Control.KeyDown> event.</span></span> <span data-ttu-id="823ba-197">たとえば、テキスト ボックス内で Tab や Return を処理するなど。</span><span class="sxs-lookup"><span data-stu-id="823ba-197">For example you want TAB and Return to be handled in a text box.</span></span>|<span data-ttu-id="823ba-198"><xref:System.Windows.Forms.Control.IsInputKey%2A> をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="823ba-198">Override <xref:System.Windows.Forms.Control.IsInputKey%2A>.</span></span> <span data-ttu-id="823ba-199">**注:** または、<xref:System.Windows.Forms.Control.PreviewKeyDown> イベントを処理し、対象の 1 つまたは複数のキーの <xref:System.Windows.Forms.PreviewKeyDownEventArgs> の <xref:System.Windows.Forms.PreviewKeyDownEventArgs.IsInputKey%2A> を `true` に設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="823ba-199">**Note:**  Alternatively, you can handle the <xref:System.Windows.Forms.Control.PreviewKeyDown> event and set <xref:System.Windows.Forms.PreviewKeyDownEventArgs.IsInputKey%2A> of the <xref:System.Windows.Forms.PreviewKeyDownEventArgs> to `true` for the key or keys you want.</span></span>|
|<span data-ttu-id="823ba-200">コントロールで特別な入力処理や移動処理を実行する。</span><span class="sxs-lookup"><span data-stu-id="823ba-200">Perform special input or navigation handling on a control.</span></span> <span data-ttu-id="823ba-201">たとえば、リスト コントロールで方向キーを使用して選択項目を変更するなど。</span><span class="sxs-lookup"><span data-stu-id="823ba-201">For example, you want the use of arrow keys in your list control to change the selected item.</span></span>|<span data-ttu-id="823ba-202"><xref:System.Windows.Forms.Control.ProcessDialogKey%2A> をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="823ba-202">Override <xref:System.Windows.Forms.Control.ProcessDialogKey%2A></span></span>|
|<span data-ttu-id="823ba-203">ナビゲーション キーをインターセプトして、<xref:System.Windows.Forms.Control.KeyPress> イベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="823ba-203">Intercept a navigation key and raise a <xref:System.Windows.Forms.Control.KeyPress> event.</span></span> <span data-ttu-id="823ba-204">たとえば、スピン ボックス コントロールで方向キーを複数回押して、項目の移動を加速するなど。</span><span class="sxs-lookup"><span data-stu-id="823ba-204">For example in a spin-box control you want multiple arrow key presses to accelerate progression through the items.</span></span>|<span data-ttu-id="823ba-205"><xref:System.Windows.Forms.Control.IsInputChar%2A> をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="823ba-205">Override <xref:System.Windows.Forms.Control.IsInputChar%2A>.</span></span>|
|<span data-ttu-id="823ba-206"><xref:System.Windows.Forms.Control.KeyPress> イベント中に、特殊な入力またはナビゲーションの処理を実行します。</span><span class="sxs-lookup"><span data-stu-id="823ba-206">Perform special input or navigation handling during a <xref:System.Windows.Forms.Control.KeyPress> event.</span></span> <span data-ttu-id="823ba-207">たとえば、リスト コントロール内で "r" キーを押し続けると、r の文字で始まる項目にスキップするなど。</span><span class="sxs-lookup"><span data-stu-id="823ba-207">For example, in a list control holding down the "r" key skips between items that begin with the letter r.</span></span>|<span data-ttu-id="823ba-208"><xref:System.Windows.Forms.Control.ProcessDialogChar%2A> をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="823ba-208">Override <xref:System.Windows.Forms.Control.ProcessDialogChar%2A></span></span>|
|<span data-ttu-id="823ba-209">カスタムなニーモニックの処理を実行する。たとえば、ツール バーに配置されたオーナー描画ボタンのニーモニックを処理するなど。</span><span class="sxs-lookup"><span data-stu-id="823ba-209">Perform custom mnemonic handling; for example, you want to handle mnemonics on owner-drawn buttons contained in a toolbar.</span></span>|<span data-ttu-id="823ba-210"><xref:System.Windows.Forms.Control.ProcessMnemonic%2A> をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="823ba-210">Override <xref:System.Windows.Forms.Control.ProcessMnemonic%2A>.</span></span>|

## <a name="see-also"></a><span data-ttu-id="823ba-211">関連項目</span><span class="sxs-lookup"><span data-stu-id="823ba-211">See also</span></span>

- <xref:System.Windows.Forms.Keys>
- <xref:System.Windows.Forms.Control.WndProc%2A>
- <xref:System.Windows.Forms.Control.PreProcessMessage%2A>
- [<span data-ttu-id="823ba-212">キーボード イベントの使用 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-212">Using keyboard events (Windows Forms .NET)</span></span>](events.md)
- [<span data-ttu-id="823ba-213">キーボード キー イベントを変更する方法 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-213">How to modify keyboard key events (Windows Forms .NET)</span></span>](how-to-change-key-press.md)
- [<span data-ttu-id="823ba-214">修飾キーの押下を確認する方法 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-214">How to Check for modifier key presses (Windows Forms .NET)</span></span>](how-to-check-modifier-key.md)
- [<span data-ttu-id="823ba-215">キーボード イベントをシミュレートする方法 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-215">How to simulate keyboard events (Windows Forms .NET)</span></span>](how-to-simulate-events.md)
- [<span data-ttu-id="823ba-216">フォームでキーボード入力メッセージを処理する方法 (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-216">How to handle keyboard input messages in the form (Windows Forms .NET)</span></span>](how-to-handle-forms.md)
- [<span data-ttu-id="823ba-217">コントロールを追加する (Windows フォーム .NET)</span><span class="sxs-lookup"><span data-stu-id="823ba-217">Add a control (Windows Forms .NET)</span></span>](../controls/how-to-add-to-a-form.md)
