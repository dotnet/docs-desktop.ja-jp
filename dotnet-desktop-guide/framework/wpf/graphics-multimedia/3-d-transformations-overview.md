---
title: 3D 変換の概要
ms.date: 03/30/2017
ms.topic: overview
dev_langs:
- csharp
- vb
helpviewer_keywords:
- 3D transformations
- transformations [WPF], 3D
ms.assetid: e45e555d-ac1e-4b36-aced-e433afe7f27f
ms.openlocfilehash: fe6c7061b6cd2f57ace1765c898dac1d1f797cab
ms.sourcegitcommit: 9f6df084c53a3da0ea657ed0d708a72213683084
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/09/2020
ms.locfileid: "96985283"
---
# <a name="3d-transformations-overview"></a><span data-ttu-id="06e1c-102">3D 変換の概要</span><span class="sxs-lookup"><span data-stu-id="06e1c-102">3D Transformations Overview</span></span>
<span data-ttu-id="06e1c-103">このトピックでは、[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] グラフィックス システムで 3D モデルに変換を適用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-103">This topic describes how to apply transformations to 3D models in the [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] graphics system.</span></span> <span data-ttu-id="06e1c-104">変換を使うと、モデルを定義する基本の値を変更することなく、モデルの位置、サイズ、向きを変更できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-104">Transformations allow the developer to reposition, resize, and reorient models without changing the base values that define them.</span></span>  

## <a name="3d-coordinate-space"></a><span data-ttu-id="06e1c-105">3D 座標空間</span><span class="sxs-lookup"><span data-stu-id="06e1c-105">3D Coordinate Space</span></span>  
 <span data-ttu-id="06e1c-106">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] での 3D グラフィックス コンテンツは <xref:System.Windows.Controls.Viewport3D> 要素にカプセル化されており、2 次元要素の構造体に含めることができます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-106">3D graphics content in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] is encapsulated in an element, <xref:System.Windows.Controls.Viewport3D>, that can participate in the two-dimensional element structure.</span></span> <span data-ttu-id="06e1c-107">グラフィックス システムは、Viewport3D を、[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 内の他の多くの要素と同じ 2 次元のビジュアル要素として処理します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-107">The graphics system treats Viewport3D as a two-dimensional visual element like many others in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="06e1c-108">Viewport3D は、3 次元シーンのウィンドウ (ビューポート) として機能します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-108">Viewport3D functions as a window—a viewport—into a three-dimensional scene.</span></span> <span data-ttu-id="06e1c-109">より正確には、3D シーンが投影されるサーフェイスです。</span><span class="sxs-lookup"><span data-stu-id="06e1c-109">More accurately, it is a surface on which a 3D scene is projected.</span></span>  <span data-ttu-id="06e1c-110">同じシーン グラフ内で他の 2D 描画オブジェクトと共に Viewport3D を使うことができますが、Viewport3D 内の 2D オブジェクトと 3D オブジェクトを相互に貫通させることはできません。</span><span class="sxs-lookup"><span data-stu-id="06e1c-110">Although you can use Viewport3D with other 2D drawing objects in the same scene graph, you cannot interpenetrate 2D and 3D objects within a Viewport3D.</span></span> <span data-ttu-id="06e1c-111">以下の説明で、座標空間は Viewport3D 要素に含まれています。</span><span class="sxs-lookup"><span data-stu-id="06e1c-111">In the following discussion, the coordinate space described is contained by the Viewport3D element.</span></span>  
  
 <span data-ttu-id="06e1c-112">2D グラフィックス用の [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 座標系の原点は、レンダリング サーフェイスの (通常は画面) の左上にあります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-112">The [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] coordinate system for 2D graphics locates the origin in the upper left of the rendering surface (typically the screen).</span></span> <span data-ttu-id="06e1c-113">2D システムでは、x 軸の正の値は右に向かって大きくなり、y 軸の正の値は下に向かって大きくなります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-113">In the 2D system, positive x-axis values proceed to the right and positive y-axis values proceed downward.</span></span> <span data-ttu-id="06e1c-114">一方、3D 座標系では、原点は画面の中央にあり、x 軸の正の値は右に向かって大きくなりますが、y 軸の正の値は上に向かって大きくなり、z 軸の正の値は原点から手前に向かって大きくなります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-114">In the 3D coordinate system, however, the origin is located in the center of the screen, with positive x-axis values proceeding to the right but positive y-axis values proceeding upward instead, and positive z-axis values proceeding outward from the origin, toward the viewer.</span></span>  
  
 <span data-ttu-id="06e1c-115">![座標系](./media/coordsystem-1.png "CoordSystem-1")</span><span class="sxs-lookup"><span data-stu-id="06e1c-115">![Coordinate systems](./media/coordsystem-1.png "CoordSystem-1")</span></span>  
<span data-ttu-id="06e1c-116">座標系の比較</span><span class="sxs-lookup"><span data-stu-id="06e1c-116">Coordinate System Comparison</span></span>  
  
 <span data-ttu-id="06e1c-117">これらの軸によって定義される空間は、[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 内の 3D オブジェクトのための静止した基準枠です。</span><span class="sxs-lookup"><span data-stu-id="06e1c-117">The space defined by these axes is the stationary frame of reference for 3D objects in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="06e1c-118">この空間内にモデルを構築し、それらを表示するためのライトとカメラを作成するときは、この静止した基準枠 ("ワールド空間") と、モデルに変換を適用するときにモデルごとに作成するローカルな基準枠を区別することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="06e1c-118">As you build models in this space and create lights and cameras to view them, it's helpful to distinguish this stationary frame of reference, or "world space," from the local frame of reference you create for each model when you apply transformations to it.</span></span> <span data-ttu-id="06e1c-119">また、ワールド空間内のオブジェクトは、ライトとカメラの設定により、まったく違って見えたり、またはまったく見えなくなることがありますが、カメラの位置によってワールド空間内のオブジェクトの場所が変化することはないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="06e1c-119">Remember also that objects in world space might look entirely different, or not be visible at all, depending on light and camera settings, but the position of the camera does not change the location of objects in world space.</span></span>  
  
## <a name="transforming-models"></a><span data-ttu-id="06e1c-120">モデルの変換</span><span class="sxs-lookup"><span data-stu-id="06e1c-120">Transforming Models</span></span>  
 <span data-ttu-id="06e1c-121">モデルを作成するとき、モデルにはシーン内で特定の位置があります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-121">When you create models, they have a particular location in the scene.</span></span> <span data-ttu-id="06e1c-122">モデルをシーン内で移動したり、回転したり、そのサイズを変更したりするのに、モデル自体を定義する頂点を変更するのは実用的ではありません。</span><span class="sxs-lookup"><span data-stu-id="06e1c-122">To move those models around in the scene, to rotate them, or to change their size, it's not practical to change the vertices that define the models themselves.</span></span> <span data-ttu-id="06e1c-123">そのような場合は、2D と同じように、モデルに変換を適用します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-123">Instead, just as in 2D, you apply transformations to models.</span></span>  
  
 <span data-ttu-id="06e1c-124">各モデル オブジェクトが備えている <xref:System.Windows.Media.Media3D.Model3D.Transform%2A> プロパティを使って、モデルの移動、回転、サイズ変更を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-124">Each model object has a <xref:System.Windows.Media.Media3D.Model3D.Transform%2A> property with which you can move, re-orient, or resize the model.</span></span> <span data-ttu-id="06e1c-125">変換を適用するときは、ベクトルにより、または変換で指定する値により、モデルのすべてのポイントをオフセットします。</span><span class="sxs-lookup"><span data-stu-id="06e1c-125">When you apply a transform, you effectively offset all the points of the model by whatever vector or value is specified by the transform.</span></span> <span data-ttu-id="06e1c-126">つまり、モデルが定義されている座標空間 ("モデル空間") を変換するのであって、シーン全体の座標系 ("ワールド空間") 内でモデルのジオメトリを構成する値を変更するのではありません。</span><span class="sxs-lookup"><span data-stu-id="06e1c-126">In other words, you've transformed the coordinate space in which the model is defined ("model space"), but you haven't changed the values that make up the model's geometry in the coordinate system of the entire scene ("world space").</span></span>  
  
## <a name="translation-transformations"></a><span data-ttu-id="06e1c-127">平行移動変換</span><span class="sxs-lookup"><span data-stu-id="06e1c-127">Translation Transformations</span></span>  
 <span data-ttu-id="06e1c-128">3D 変換は、抽象基本クラス <xref:System.Windows.Media.Media3D.Transform3D> を継承します。これには、アフィン変換クラス <xref:System.Windows.Media.Media3D.TranslateTransform3D>、<xref:System.Windows.Media.Media3D.ScaleTransform3D>、<xref:System.Windows.Media.Media3D.RotateTransform3D> が含まれます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-128">3D transformations inherit from the abstract base class <xref:System.Windows.Media.Media3D.Transform3D>; these include the affine transform classes <xref:System.Windows.Media.Media3D.TranslateTransform3D>, <xref:System.Windows.Media.Media3D.ScaleTransform3D>, and <xref:System.Windows.Media.Media3D.RotateTransform3D>.</span></span> <span data-ttu-id="06e1c-129">また、[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] の 3D システムには <xref:System.Windows.Media.Media3D.MatrixTransform3D> クラスも用意されており、より簡潔な行列演算で同じ変換を指定できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-129">The [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3D system also provides a <xref:System.Windows.Media.Media3D.MatrixTransform3D> class that lets you specify the same transformations in more concise matrix operations.</span></span>  
  
 <span data-ttu-id="06e1c-130"><xref:System.Windows.Media.Media3D.TranslateTransform3D> は、Model3D 内のすべての点を、<xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetX%2A>、<xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetY%2A>、<xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetZ%2A> の各プロパティで指定したオフセット ベクターの方向に移動します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-130"><xref:System.Windows.Media.Media3D.TranslateTransform3D> moves all the points in the Model3D in the direction of the offset vector you specify with the <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetX%2A>, <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetY%2A>, and <xref:System.Windows.Media.Media3D.TranslateTransform3D.OffsetZ%2A> properties.</span></span> <span data-ttu-id="06e1c-131">たとえば、立方体の 1 つの頂点が (2,2,2) にあるものとすると、オフセット ベクトル (0,1.6,1) により頂点 (2,2,2) は (2,3.6,3) に移動します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-131">For example, given one vertex of a cube at (2,2,2), an offset vector of (0,1.6,1) would move that vertex (2,2,2) to (2,3.6,3).</span></span> <span data-ttu-id="06e1c-132">モデル空間内での立方体の頂点はまだ (2,2,2) にありますが、モデル空間の (2,2,2) がワールド空間では (2,3.6,3) になるように、モデル空間とワールド空間の関係が変更されています。</span><span class="sxs-lookup"><span data-stu-id="06e1c-132">The cube's vertex is still (2,2,2) in model space, but now that model space has changed its relationship to world space so that (2,2,2) in model space is (2,3.6,3) in world space.</span></span>  
  
 <span data-ttu-id="06e1c-133">![平行移動の図](./media/transforms-translate.png "Transforms-Translate")</span><span class="sxs-lookup"><span data-stu-id="06e1c-133">![Translation figure](./media/transforms-translate.png "Transforms-Translate")</span></span>  
<span data-ttu-id="06e1c-134">オフセットでの平行移動</span><span class="sxs-lookup"><span data-stu-id="06e1c-134">Translation with Offset</span></span>  
  
 <span data-ttu-id="06e1c-135">次のコード例は、平行移動を適用する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="06e1c-135">The following code examples show how to apply a translation.</span></span>  
  
 [!code-xaml[animation3dgallery_snip#Translation3DAnimationExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/Animation3DGallery_snip/CS/Translation3DAnimationExample.xaml#translation3danimationexamplewholepage)]  
  
## <a name="scale-transformations"></a><span data-ttu-id="06e1c-136">スケール変換</span><span class="sxs-lookup"><span data-stu-id="06e1c-136">Scale Transformations</span></span>  
 <span data-ttu-id="06e1c-137"><xref:System.Windows.Media.Media3D.ScaleTransform3D> は、中心点を基準にして、モデルのスケールを、指定されたスケール ベクトルだけ変更します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-137"><xref:System.Windows.Media.Media3D.ScaleTransform3D> changes the model's scale by a specified scale vector with reference to a center point.</span></span> <span data-ttu-id="06e1c-138">一様なスケールを指定すると、モデルは X、Y、Z 軸の方向に同じ比率だけ拡大縮小され、それに比例してモデルのサイズが変化します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-138">Specify a uniform scale, which scales the model by the same value in the X, Y, and Z axes, to change the model's size proportionally.</span></span> <span data-ttu-id="06e1c-139">たとえば、変換の <xref:System.Windows.Media.ScaleTransform.ScaleX%2A>、<xref:System.Windows.Media.ScaleTransform.ScaleY%2A>、<xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> の各プロパティを 0.5 に設定すると、モデルのサイズが半分になり、同じプロパティを 2 に設定すると、3 軸すべてのスケールが倍になります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-139">For example, setting the transform's <xref:System.Windows.Media.ScaleTransform.ScaleX%2A>, <xref:System.Windows.Media.ScaleTransform.ScaleY%2A>, and <xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> properties to 0.5 halves the size of the model; setting the same properties to 2 doubles its scale in all three axes.</span></span>  
  
 <span data-ttu-id="06e1c-140">![一様な ScaleTransform3D](./media/threecubes-uniformscale-1.png "threecubes_uniformscale_1")</span><span class="sxs-lookup"><span data-stu-id="06e1c-140">![Uniform ScaleTransform3D](./media/threecubes-uniformscale-1.png "threecubes_uniformscale_1")</span></span>  
<span data-ttu-id="06e1c-141">ScaleVector の例</span><span class="sxs-lookup"><span data-stu-id="06e1c-141">ScaleVector Example</span></span>  
  
 <span data-ttu-id="06e1c-142">一様ではないスケール変換 (X、Y、Z すべての値が同じではないスケール変換) を指定すると、3 つの方向をそれぞれ独立して拡大または縮小できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-142">By specifying a non-uniform scale transformation—a scale transformation whose X, Y, and Z values are not all the same—you can cause a model to stretch or contract in one or two dimensions without affecting the others.</span></span> <span data-ttu-id="06e1c-143">たとえば、<xref:System.Windows.Media.ScaleTransform.ScaleX%2A> を1に、<xref:System.Windows.Media.ScaleTransform.ScaleY%2A> を 2 に、<xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> を 1 に設定すると、変換されたモデルの高さは倍になりますが、X 軸方向と Z 軸方向に変化はありません。</span><span class="sxs-lookup"><span data-stu-id="06e1c-143">For example, setting <xref:System.Windows.Media.ScaleTransform.ScaleX%2A> to 1, <xref:System.Windows.Media.ScaleTransform.ScaleY%2A> to 2, and <xref:System.Windows.Media.Media3D.ScaleTransform3D.ScaleZ%2A> to 1 would cause the transformed model to double in height but remain unchanged along the X and Z axes.</span></span>  
  
 <span data-ttu-id="06e1c-144">既定では、ScaleTransform3D では原点 (0,0,0) を基準にして頂点が拡大または縮小します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-144">By default, ScaleTransform3D causes vertices to expand or contract about the origin (0,0,0).</span></span> <span data-ttu-id="06e1c-145">ただし、変換するモデルが原点から描画されていない場合は、原点からモデルを拡大縮小すると、モデルのスケールは "その場" では変化しません。</span><span class="sxs-lookup"><span data-stu-id="06e1c-145">If the model you want to transform is not drawn from the origin, however, scaling the model from the origin will not scale the model "in place."</span></span> <span data-ttu-id="06e1c-146">代わりに、モデルの頂点がスケール ベクトルで乗算されて、スケール演算にはモデルの平行移動と拡大縮小の効果があります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-146">Instead, when the model's vertices are multiplied by the scale vector, the scale operation will have the effect of translating the model as well as scaling it.</span></span>  
  
 <span data-ttu-id="06e1c-147">![指定した中心点でスケールされる 3 つの立方体](./media/threecubes-scaledwithcenter-1.png "threecubes_scaledwithcenter_1")</span><span class="sxs-lookup"><span data-stu-id="06e1c-147">![Three cubes scaled with center point specified](./media/threecubes-scaledwithcenter-1.png "threecubes_scaledwithcenter_1")</span></span>  
<span data-ttu-id="06e1c-148">スケールの中心点の例</span><span class="sxs-lookup"><span data-stu-id="06e1c-148">Scale Center Example</span></span>  
  
 <span data-ttu-id="06e1c-149">モデルを "特定の場所で" 拡大縮小するには、ScaleTransform3D の <xref:System.Windows.Media.ScaleTransform.CenterX%2A>、<xref:System.Windows.Media.ScaleTransform.CenterY%2A>、<xref:System.Windows.Media.Media3D.ScaleTransform3D.CenterZ%2A> の各プロパティを設定して、モデルの中心を指定します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-149">To scale a model "in place," specify the center of the model by setting the ScaleTransform3D's <xref:System.Windows.Media.ScaleTransform.CenterX%2A>, <xref:System.Windows.Media.ScaleTransform.CenterY%2A>, and <xref:System.Windows.Media.Media3D.ScaleTransform3D.CenterZ%2A> properties.</span></span> <span data-ttu-id="06e1c-150">このようにすると、グラフィックス システムはモデル空間を拡大縮小した後、指定された <xref:System.Windows.Media.Media3D.Point3D> が中心になるようにモデルを平行移動します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-150">This ensures that the graphics system scales the model space and then translates it to center on the specified <xref:System.Windows.Media.Media3D.Point3D>.</span></span> <span data-ttu-id="06e1c-151">逆に、原点を基準にモデルを構築し、異なる中心点を指定すると、モデルは原点から離れるように平行移動されます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-151">Conversely, if you've built the model about the origin and specify a different center point, expect to see the model translated away from the origin.</span></span>  
  
## <a name="rotation-transformations"></a><span data-ttu-id="06e1c-152">回転変換</span><span class="sxs-lookup"><span data-stu-id="06e1c-152">Rotation Transformations</span></span>  
 <span data-ttu-id="06e1c-153">3D のモデルは複数の方法で回転できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-153">You can rotate a model in 3D in several different ways.</span></span> <span data-ttu-id="06e1c-154">一般的な回転変換では、軸と、その軸の周りの回転角度を指定します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-154">A typical rotation transformation specifies an axis and an angle of rotation around that axis.</span></span> <span data-ttu-id="06e1c-155"><xref:System.Windows.Media.Media3D.RotateTransform3D> クラスでは、その <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> プロパティを使用して <xref:System.Windows.Media.Media3D.Rotation3D> を定義できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-155">The <xref:System.Windows.Media.Media3D.RotateTransform3D> class allows you to define a <xref:System.Windows.Media.Media3D.Rotation3D> with its <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> property.</span></span> <span data-ttu-id="06e1c-156">次に、Rotation3D (この例では <xref:System.Windows.Media.Media3D.AxisAngleRotation3D>) の <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Axis%2A> プロパティおよび <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Angle%2A> プロパティを指定して、変換を定義します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-156">You then specify <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Axis%2A> and <xref:System.Windows.Media.Media3D.AxisAngleRotation3D.Angle%2A> properties on the Rotation3D, in this case an <xref:System.Windows.Media.Media3D.AxisAngleRotation3D>, to define the transformation.</span></span> <span data-ttu-id="06e1c-157">次の例では、Y 軸を中心に 60 度だけモデルを回転します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-157">The following examples rotate a model by 60 degrees around the Y axis.</span></span>  
  
 [!code-xaml[animation3dgallery_snip#Rotate3DUsingAxisAngleRotation3DExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/Animation3DGallery_snip/CS/Rotat3DUsingAxisAngleRotation3DExample.xaml#rotate3dusingaxisanglerotation3dexamplewholepage)]  
  
 <span data-ttu-id="06e1c-158">注:[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)]3D は右手座標系であり、正の回転角度を指定するとモデルは軸を中心に反時計方向に回転します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-158">Note:[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3D is a right-handed system, which means that a positive angle value for a rotation results in a counter-clockwise rotation about the axis.</span></span>  
  
 <span data-ttu-id="06e1c-159">RotateTransform3D の <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterX%2A>、<xref:System.Windows.Media.Media3D.RotateTransform3D.CenterY%2A>、<xref:System.Windows.Media.Media3D.RotateTransform3D.CenterZ%2A> の各プロパティの値が指定されていない場合、軸角度の回転は原点を中心とする回転と見なされます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-159">Axis-angle rotations assume rotation about the origin if a value is not specified for the <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterX%2A>, <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterY%2A>, and <xref:System.Windows.Media.Media3D.RotateTransform3D.CenterZ%2A> properties on RotateTransform3D.</span></span> <span data-ttu-id="06e1c-160">拡大縮小と同様に、回転でもモデルの座標空間全体が変換されることを憶えておくと役に立ちます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-160">As with scaling, it's helpful to remember that the rotation transforms the model's entire coordinate space.</span></span> <span data-ttu-id="06e1c-161">モデルが原点を中心として作成されていない場合、または前に平行移動されている場合は、その場での回転ではなく、原点を中心とする "ピボット" になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-161">If the model was not created about the origin, or has been translated previously, the rotation might "pivot" about the origin instead of rotating in place.</span></span>  
  
 <span data-ttu-id="06e1c-162">![新しい中心点による回転](./media/threecubes-rotationwithcenter-1.png "threecubes_rotationwithcenter_1")</span><span class="sxs-lookup"><span data-stu-id="06e1c-162">![Rotation with new center point](./media/threecubes-rotationwithcenter-1.png "threecubes_rotationwithcenter_1")</span></span>  
<span data-ttu-id="06e1c-163">指定された新しい中心による回転</span><span class="sxs-lookup"><span data-stu-id="06e1c-163">Rotation with new center specified</span></span>  
  
 <span data-ttu-id="06e1c-164">モデルを "その場で" 回転するには、モデルの実際の中心を回転の中心として指定します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-164">To rotate the model "in place," specify the model's actual center as the center of rotation.</span></span> <span data-ttu-id="06e1c-165">通常、ジオメトリは原点を中心にモデル化されるので、ほとんどの場合は、最初にモデルのサイズを変更し (スケーリング)、次に向きを設定し (回転)、最後に目的の位置に移動することにより (平行移動)、変換のセットで意図した結果が得られます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-165">Because geometry is typically modeled about the origin, you can most often get the expected result of a set of transformations by first sizing the model (scaling it), then setting its orientation (rotating it), and finally moving it to the desired location (translating it).</span></span>  
  
 <span data-ttu-id="06e1c-166">![x 軸と y 軸で 60 度回転](./media/twocubes-rotation2axes-1.png "twocubes_rotation2axes_1")</span><span class="sxs-lookup"><span data-stu-id="06e1c-166">![Rotation by 60 degrees in x&#45; and y&#45;axes](./media/twocubes-rotation2axes-1.png "twocubes_rotation2axes_1")</span></span>  
<span data-ttu-id="06e1c-167">回転の例</span><span class="sxs-lookup"><span data-stu-id="06e1c-167">Rotation Example</span></span>  
  
 <span data-ttu-id="06e1c-168">軸角度の回転は、静的な変換と一部のアニメーションで問題なく行われます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-168">Axis-angle rotations work well for static transformations and some animations.</span></span> <span data-ttu-id="06e1c-169">ただし、立方体モデルを X 軸を中心に 60 度回転してから、Z 軸を中心に 45 度回転する場合を考えてみてください。</span><span class="sxs-lookup"><span data-stu-id="06e1c-169">However, consider rotating a cube model 60 degrees around the X axis, then 45 degrees around the Z axis.</span></span> <span data-ttu-id="06e1c-170">この変換は、2 つの個別のアフィン変換として、または行列として記述できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-170">You can describe this transformation as two discrete affine transformations, or as a matrix.</span></span> <span data-ttu-id="06e1c-171">しかし、この方法で定義された回転をスムーズにアニメーション化するのは難しい場合があります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-171">However, it might be difficult to smoothly animate a rotation defined this way.</span></span> <span data-ttu-id="06e1c-172">どちらの方法で計算してもモデルの最初と最後の位置は同じですが、モデルの中間の位置は計算上は不確定です。</span><span class="sxs-lookup"><span data-stu-id="06e1c-172">Although the beginning and ending positions of the model computed by either approach are the same, the intermediate positions taken by the model are computationally uncertain.</span></span> <span data-ttu-id="06e1c-173">四元数は、回転の開始と終了の間の補間を計算する別の方法を表します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-173">Quaternions represent an alternative way to compute the interpolation between the start and end of a rotation.</span></span>  
  
 <span data-ttu-id="06e1c-174">四元数では、3D 空間内の軸と、その軸を中心とする回転が表されます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-174">A quaternion represents an axis in 3D space and a rotation around that axis.</span></span> <span data-ttu-id="06e1c-175">たとえば、四元数では、(1,1,2) の軸と 50 度の回転といったように表されます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-175">For example, a quaternion might represent a (1,1,2) axis and a rotation of 50 degrees.</span></span> <span data-ttu-id="06e1c-176">回転の定義における四元数の威力は、合成と補間という 2 つの操作を実行できることです。</span><span class="sxs-lookup"><span data-stu-id="06e1c-176">Quaternions’ power in defining rotations comes from the two operations that you can perform on them: composition and interpolation.</span></span> <span data-ttu-id="06e1c-177">ジオメトリに適用される 2 つの四元数の合成とは、"ジオメトリを、axis2 を中心に rotation2 だけ回転した後、axis1 を中心に rotation1 だけ回転する" ことを意味します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-177">The composition of two quaternions applied to a geometry means "rotate the geometry around axis2 by rotation2, then rotate it around axis1 by rotation1."</span></span> <span data-ttu-id="06e1c-178">合成を使うと、ジオメトリに対する 2 つの回転を組み合わせて、結果を表す 1 つの四元数を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-178">By using composition, you can combine the two rotations on the geometry to get a single quaternion that represents the result.</span></span> <span data-ttu-id="06e1c-179">四元数の補間では、ある軸と向きから別の軸と向きへの滑らかで適切なパスを計算できるので、オリジナルから合成された四元数への補間を行うことで、ある状態から別の状態へのスムーズな移行を実現して、変換をアニメーション化できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-179">Because quaternion interpolation can calculate a smooth and reasonable path from one axis and orientation to another, you can interpolate from the original to the composed quaternion to achieve a smooth transition from one to the other, enabling you to animate the transformation.</span></span> <span data-ttu-id="06e1c-180">アニメーション化するモデルでは、<xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> プロパティの <xref:System.Windows.Media.Media3D.QuaternionRotation3D> を使用して、回転先の <xref:System.Windows.Media.Media3D.Quaternion> を指定できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-180">For models that you want to animate, you can specify a destination <xref:System.Windows.Media.Media3D.Quaternion> for the rotation by using a <xref:System.Windows.Media.Media3D.QuaternionRotation3D> for the <xref:System.Windows.Media.Media3D.RotateTransform3D.Rotation%2A> property.</span></span>  
  
## <a name="using-transformation-collections"></a><span data-ttu-id="06e1c-181">変換のコレクションの使用</span><span class="sxs-lookup"><span data-stu-id="06e1c-181">Using Transformation Collections</span></span>  
 <span data-ttu-id="06e1c-182">シーンを作成する場合、通常はモデルに複数の変換を適用します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-182">When building a scene, it's common to apply more than one transformation to a model.</span></span> <span data-ttu-id="06e1c-183"><xref:System.Windows.Media.Media3D.Transform3DGroup> クラスの <xref:System.Windows.Media.Media3D.Transform3DGroup.Children%2A> コレクションに変換を追加して、シーン内のさまざまなモデルに適用できるように変換を適宜グループ化します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-183">Add transforms to the <xref:System.Windows.Media.Media3D.Transform3DGroup.Children%2A> collection of the <xref:System.Windows.Media.Media3D.Transform3DGroup> class to group transforms conveniently to apply to various models in the scene.</span></span> <span data-ttu-id="06e1c-184">各インスタンスに異なる変換セットを適用することでモデルを再利用できるように、多くの場合、複数の異なるグループで変換を再利用すると便利です。</span><span class="sxs-lookup"><span data-stu-id="06e1c-184">It's often convenient to reuse a transformation in several different groups, in much the way that you can reuse a model by applying a different set of transforms to each instance.</span></span> <span data-ttu-id="06e1c-185">変換をコレクションに追加する順序が重要であることに注意してください。コレクション内の変換は、最初から最後まで順番に適用されます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-185">Note that order in which the transformations are added to the collection is significant: transforms in the collection are applied from first to last.</span></span>  
  
## <a name="animating-transformations"></a><span data-ttu-id="06e1c-186">変換のアニメーション化</span><span class="sxs-lookup"><span data-stu-id="06e1c-186">Animating Transformations</span></span>  
 <span data-ttu-id="06e1c-187">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] の 3D の実装は、2D グラフィックスと同じタイミングおよびアニメーション システムに参加しています。</span><span class="sxs-lookup"><span data-stu-id="06e1c-187">The [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] 3D implementation participates in the same timing and animation system as 2D graphics.</span></span> <span data-ttu-id="06e1c-188">つまり、3D シーンをアニメーション化するには、そのモデルのプロパティをアニメーション化します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-188">In other words, to animate a 3D scene, animate the properties of its models.</span></span> <span data-ttu-id="06e1c-189">プリミティブのプロパティを直接アニメーション化することもできますが、通常は、モデルの位置や外観を変更する変換をアニメーション化する方が簡単です。</span><span class="sxs-lookup"><span data-stu-id="06e1c-189">It's possible to animate properties of primitives directly, but it's typically easier to animate transformations that change the position or appearance of models.</span></span> <span data-ttu-id="06e1c-190">変換は <xref:System.Windows.Media.Media3D.Model3DGroup> オブジェクトおよび個別のモデルに適用できるので、あるアニメーション セットを Model3Dgroup の子に適用し、別のアニメーション セットをオブジェクトのグループに適用するといったことが可能です。</span><span class="sxs-lookup"><span data-stu-id="06e1c-190">Because transformations can be applied to <xref:System.Windows.Media.Media3D.Model3DGroup> objects as well as individual models, it's possible to apply one set of animations to the children of a Model3Dgroup and another set of animations to a group of objects.</span></span>  <span data-ttu-id="06e1c-191">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] のタイミングおよびアニメーション システムの背景情報については、「[アニメーションの概要](animation-overview.md)」および「[ストーリーボードの概要](storyboards-overview.md)」トピックをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="06e1c-191">For background information on the [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] timing and animation system, see [Animation Overview](animation-overview.md) and [Storyboards Overview](storyboards-overview.md).</span></span>  
  
 <span data-ttu-id="06e1c-192">[!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)] のオブジェクトをアニメーション化するには、タイムラインを作成し、アニメーションを定義して (時間経過と共に一部のプロパティの値を実際に変更します)、アニメーションを適用するプロパティを指定します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-192">To animate an object in [!INCLUDE[TLA#tla_winclient](../../../includes/tlasharptla-winclient-md.md)], create a timeline, define an animation (which is really a change in some property value over time), and specify the property to which to apply the animation.</span></span> <span data-ttu-id="06e1c-193">このプロパティは、FrameworkElement のプロパティである必要があります。</span><span class="sxs-lookup"><span data-stu-id="06e1c-193">This property must be a property of a FrameworkElement.</span></span> <span data-ttu-id="06e1c-194">3D シーンのすべてのオブジェクトは Viewport3D の子なので、シーンに適用するアニメーションの対象となるプロパティは、Viewport3D のプロパティのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="06e1c-194">Because all the objects in a 3D scene are children of Viewport3D, the properties targeted by any animation you want to apply to the scene are properties of properties of Viewport3D.</span></span> <span data-ttu-id="06e1c-195">構文が冗長になる場合があるので、アニメーションのプロパティ パスを慎重に検討することが重要です。</span><span class="sxs-lookup"><span data-stu-id="06e1c-195">It's important to work out the property path for the animation carefully, because the syntax can be verbose.</span></span>  
  
 <span data-ttu-id="06e1c-196">オブジェクトをその場で回転させ、さらに揺れる動作を適用してオブジェクトの多くの部分が見えるようにしたいものとします。</span><span class="sxs-lookup"><span data-stu-id="06e1c-196">Suppose you want to rotate an object in place, but also to apply a swinging motion to expose more of the object to view.</span></span> <span data-ttu-id="06e1c-197">そのためには、RotateTransform3D をモデルに適用し、回転軸をあるベクトルから別のベクトルにアニメーション化します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-197">You might choose to apply a RotateTransform3D to the model, and animate the axis of its rotation from one vector to another.</span></span> <span data-ttu-id="06e1c-198">次のコード例では、RotateTransform3D が <xref:System.Windows.Media.TransformGroup> でモデルに適用される複数の変換の 1 つであるものとして、変換の Rotation3D の Axis プロパティに <xref:System.Windows.Media.Animation.Vector3DAnimation> を適用する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="06e1c-198">The following code example demonstrates applying a <xref:System.Windows.Media.Animation.Vector3DAnimation> to the Axis property of the transformation's Rotation3D, assuming the RotateTransform3D to be one of several transforms applied to the model with a <xref:System.Windows.Media.TransformGroup>.</span></span>  
  
 [!code-csharp[3doverview#3DOverview3DN1](~/samples/snippets/csharp/VS_Snippets_Wpf/3DOverview/CSharp/Window1.xaml.cs#3doverview3dn1)]
 [!code-vb[3doverview#3DOverview3DN1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/3DOverview/visualbasic/window1.xaml.vb#3doverview3dn1)]  
  
 [!code-csharp[3doverview#3DOverview3DN3](~/samples/snippets/csharp/VS_Snippets_Wpf/3DOverview/CSharp/Window1.xaml.cs#3doverview3dn3)]
 [!code-vb[3doverview#3DOverview3DN3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/3DOverview/visualbasic/window1.xaml.vb#3doverview3dn3)]  
  
 <span data-ttu-id="06e1c-199">オブジェクトを移動または拡大縮小するには、他の変換プロパティを対象に同様の構文を使います。</span><span class="sxs-lookup"><span data-stu-id="06e1c-199">Use a similar syntax to target other transformation properties to move or scale the object.</span></span>  <span data-ttu-id="06e1c-200">たとえば、スケール変換の ScaleCenter プロパティに <xref:System.Windows.Media.Animation.Point3DAnimation> を適用して、モデルの形状をスムーズに変形することができます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-200">For example, you might apply a <xref:System.Windows.Media.Animation.Point3DAnimation> to the ScaleCenter property on a scale transform to cause a model to smoothly distort its shape.</span></span>  
  
 <span data-ttu-id="06e1c-201">上の例では <xref:System.Windows.Media.Media3D.GeometryModel3D> のプロパティを変換していますが、シーン内の他のモデルのプロパティを変換することもできます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-201">Although the preceding examples transform the properties of <xref:System.Windows.Media.Media3D.GeometryModel3D>, it’s also possible to transform the properties of other models in the scene.</span></span>  <span data-ttu-id="06e1c-202">Light オブジェクトに適用される変換をアニメーション化することで、モデルの外観を劇的に変えることができる、移動する照明効果とシャドウ効果を作成できます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-202">By animating translations applied to Light objects, for example, you can create moving light and shadow effects that can dramatically change the appearance of your models.</span></span>  
  
 <span data-ttu-id="06e1c-203">カメラもモデルなので、カメラのプロパティを変換することもできます。</span><span class="sxs-lookup"><span data-stu-id="06e1c-203">Because cameras are also models, it’s possible to transform camera properties as well.</span></span>  <span data-ttu-id="06e1c-204">カメラの位置または平面距離を変換することにより (実際には、シーン全体の投影を変換して) シーンの外観を変更できますが、この方法で得られる効果の多くは、シーン内のモデルの場所や位置に適用される変換ほど大きな "視覚的意味" を見ている人に与えられない場合があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="06e1c-204">While you can certainly change the appearance of the scene by transforming the camera location or plane distances—in effect, transforming the entire scene projection—note that many of the effects you achieve this way may not make as much "visual sense" to the viewer as transformations applied to the location or position of the models in the scene.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="06e1c-205">関連項目</span><span class="sxs-lookup"><span data-stu-id="06e1c-205">See also</span></span>

- [<span data-ttu-id="06e1c-206">3D グラフィックスの概要</span><span class="sxs-lookup"><span data-stu-id="06e1c-206">3D Graphics Overview</span></span>](3-d-graphics-overview.md)
- [<span data-ttu-id="06e1c-207">変換の概要</span><span class="sxs-lookup"><span data-stu-id="06e1c-207">Transforms Overview</span></span>](transforms-overview.md)
- [<span data-ttu-id="06e1c-208">2D 変換のサンプル</span><span class="sxs-lookup"><span data-stu-id="06e1c-208">2D Transforms Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Graphics/2DTransforms)
